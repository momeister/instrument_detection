import librosa

def detect_instrument(mp3_file):
    # Laden der MP3-Datei
    audio, sr = librosa.load(mp3_file)

    # Berechnung des harmonischen Signals
    harmonic_audio, percussive_audio = librosa.effects.hpss(audio)

    # Erkennung des Instruments
    # Sie können Ihre eigenen Kriterien für die Erkennung festlegen
    # Zum Beispiel, wenn die harmonische Energie dominant ist, erkennen Sie ein Klavier
    # Wenn die perkussive Energie dominant ist, erkennen Sie eine Gitarre oder Schlagzeug usw.

    print(harmonic_audio)
    print(percussive_audio)
    print(f"Unterschied harmonisch: {sum(abs(harmonic_audio))} vs percussive: {sum(abs(percussive_audio))}")

    if sum(abs(harmonic_audio)) > sum(abs(percussive_audio)):
        return "Klavier"
    else:
        return "Gitarre"  # Ändern Sie dies entsprechend Ihren Kriterien

# Test
print(detect_instrument("testgitarre.mp3"))
print(detect_instrument("testklavier.mp3"))
print(detect_instrument("random.mp3"))
#print(detect_instrument("random3.mp3"))
#print(detect_instrument("langeWAV.wav"))
